os:
  - linux
  - osx

compiler:
  - clang
language: c++
sudo: false
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    - kalakris-cmake
    packages:
    - perl
    - gcc-4.8
    - g++-4.8
    - python-dev
    - python-numpy
    - libxml2-dev
    - libboost-all-dev
    - cmake


env:
  global:  
#             FTP_USER 
    - secure: "Bfi97RX3mPFKg45e31tyOPl1WSM2Vi3muq8ptFb4Xu8QezH3snhVaqRVTT2WFr3G7fOqzILk0zpSUKYSH2ao/62pKuYU1f6QEgdj0warPLD9ifSFUsic0qM8TyNqSimdD8dqv5CNz34xsUpNXnylKBud5btdTTRFC+b4m5KUDS6LGf3dZwBos5tm2ZpkHrhgzhIcBo6n56vyg/QJIl95PsDM8WLcE3E197lh5uFpr4GU3k4hpHfwcbB9NJ3A3wpAjDBiV52nxDlFa8TE3IqlrlGDXesiICvyNFRuXTjY5Lm1kHTpPWWxc3ZkroVHsWCmXMA5JhbNAkt/lnWjd7iLQQztr0Kwq+Qq2al3gOyrPSVx5+1EfW0JGo8p7r4rT9/ERc1Ue3PGnnZqdFT/3OH8mbJJaZR6jXOBcARbX1tJpDxu+WFiT13fvvf1zNxALfVL0aVfJuSczE/acmYW34+CUHf878fWFLJ2fpD8/Qn1pqkMcquOEXfE27Z21NKpbPfbLkFF73E40Sj0bRu3WUeX4z5B6bN3Jeb7D8AEx/WpCwdo9iqqvUs5nqOkW5Us4bCoxgzQ0zowwG/Gzdo0jj1ppx/IOgBnBYsMmB9eiWnhmZtsR1iOpnEAsGeVGg5IF28dv00foDNrm+dbkjBsH5CTPsKW1t/+i9AoZLetswi+bmg="
#             FTP_PASSWORD
    - secure: "csWCsj3YX+/p1BM+1wfON9vyr2W7HNmx/9fTsNaIJ5o4/vxGezv0o+WfMPjV0W1WPfBEuB3z/NTZ7lnUURnnRD54+BZdNJ4+c42c/l7O6EmJgSF4An68ZsYhRGp8nq83rdUPNAaWUY9cSL+o4/q6x2A1jU+Xi6YpFMaXzOSjpbs4orBBTPSVWjz9YF4v7H8b+IkGV6MhWUM7Eiy5SHd7rbdxALgCId32jbvgxQzLnIh79wzif7rS1UnIODyjDLK4fws623/PISJAdGBvzvQ1bonzI53w59vyh2moURipvAiaUsAH6We7zH8VnhE9HaIZVxvWTRD3kiwYECwjyV9OafDBIOHIWFbEGCHgbgLkoQh4r+rvmizKQfQueTCeVwhYEpEqsukdv7p27hLRS6lzL3KthCrkCT1phazPwabpwaQgQd3XtZQ7LGvuA0i564LRT/R2HS8rasyFNbrP5meq09G+plLAsI3M2QYxRzvqVh/Ja55gSRNw3mJCZg+YZAyreEgjNEKafjp47T9W0gSyPfBcFZ/z8DwpBztDDnfxt5XiNdka6plV/Pgsbg/LSmOKkgemcs6CcgASYCFxyxJVZKxLe9i+RRrhHXsyhLO15IEfvaP8hHJCrgDRX/y94DOf+den1hYdOX9qb/d6Ev0zyXDLr2r5K6KZ0equXtXnKa4="


notifications:
  slack:
    rooms:
      - secure: Rxjp4bNLl/kx9dbQxpXtHi2KEl7M25/gJcG874IlF40B9tnPwRmGm+w8m3smQW7gRNLyZ6VfoBcmuGet+GMBTCCa44dCcm9qkx+OZJkOBv/C5TLEO4dBtAMFDhRRmpr2LhZfxvbC0R0CRP3wzGIea4RWFJBcvF/oAtGxYSfISpEE745DDY/W9yNRk3AchFDvb9T3f6ip3JDJnamdBh5xMUD1Ou6HiTUjXm4qrwwG89Lf9MrzmN3LOuP/+wE/w+wz4MeEYuPWMfQIYGdI0Bhz7zglmRpBPX4F6FSN9LyBrTORZz09erXLwcz7kyP+LfA3cXrvoMSD4eR8mSyRxV20o7p5+phHNdYkpohmoOwOPO7cT/yfSSjQIzCN4NYeIxTTXed4AyAfDFCVrB8o5sqs2QC1O7MuNOgKw1DDvUMNRLd+8x41xpdr0dZC1OxgJ0glURaHq1e7C2GqjzKgd0wm1bYhnOWWLMwe4S9mrxo8/bKG6JQ0TchXkr5PHo02QT+HTiDysDgsa+etyM4zIMbNpp3aYQsNMxu3IOgzINUgcnoVreyXlht1QGEu8I6WIWNWYnBmdjx+aK7V2dKeEx5LLqJ/RO5+CWaXyYIdg7EYQn/WIx9Z5ifCs4s8m7ZqKYd6D+1KpfrrhMtnZ/uTJ/HVHkLwyW7DX/caRn7kpnQU5Xc=
    template:
      - "NFsim build: %{result} in %{duration}"
      - "Build: <%{build_url}|#%{build_number}> (<%{compare_url}|%{commit}>) Author: %{author}"   
      - "To download the NFsim executable, "
      - "Goto: https://rawgit.com/RuleWorld/nfsim/master/.NFsim_Beta.html"
      - "To package NFsim, please make a small modification to BioNetGen:"
      - "Goto: https://github.com/RuleWorld/bionetgen"
      - "Build details:  %{build_url} "


before_install:
- source osx_install.sh

install:
    - if [ "$CXX" = "g++" ]; then export CXX="g++-4.8" CC="gcc-4.8"; fi

script: 
  - mkdir -p build; mkdir -p dist; cd build; cmake ..; make; cp NFsim ../dist; cp NFsim ../dist/NFsim-$TRAVIS_OS_NAME ;cd ..; 
  - cd validate;tar xfj bionetgen-2.2.6.tar.bz2
  - python validate.py
  - cd ..
  - source .curl_ftp.sh
# Putting the curl statement here, will ensure that an executable will be uploaded, even though the test suite may have
# completed with one or more failures.
  
after_success:
#  - source .curl_ftp.sh
